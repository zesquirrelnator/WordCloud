
<html>

<body>
    <head>
        <style>
            html, body, #container {
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
            }
        </style>
        <script src="https://cdn.jsdelivr.net/npm/js-cookie@2.2.1/src/js.cookie.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
        <script src="https://cdn.anychart.com/releases/v8/js/anychart-base.min.js"></script>
        <script src="https://cdn.anychart.com/releases/v8/js/anychart-tag-cloud.min.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-app.js"></script>

        <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-analytics.js"></script>

        <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-firestore.js"></script>

        <script>
        var firebaseConfig = {
            apiKey: "AIzaSyBQShsnp7K5oN3HU1gPIl-4_NDRMjel2Gg",
            authDomain: "wordcloud-b7391.firebaseapp.com",
            projectId: "wordcloud-b7391",
            storageBucket: "wordcloud-b7391.appspot.com",
            messagingSenderId: "608300800963",
            appId: "1:608300800963:web:0f32c76ac18d6bb2c2fb76",
            measurementId: "G-VN7QGY00L2"
        };

        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
        const db = firebase.firestore();
        </script>
    </head>
    
    <body>
        <div id="wordCloud">
            <form autocomplete="off" onsubmit="return false">
                <div style="padding-left: 25px; width:300px; display:table" class="form-group">
                    <br>
                    <input autocomplete="off" class="form-control" style="z-index:9999; position:relative" id="command"
                    placeholder="word">
                    <button onClick="Send();" type="submit" style="z-index:9999; position:relative"
                        class="btn btn-success">Send</button>
                    <br>
                    <br>
                    <br>
                    <input autocomplete="off" class="form-control" style="z-index:9999; position:relative" id="code"
                    placeholder="code">
                    <input autocomplete="off" class="form-control" style="z-index:9999; position:relative" id="delWord"
                    placeholder="word">
                    <button onClick="Delete();" type="submit" style="z-index:9999; position:relative"
                    class="btn btn-success">Delete</button>
                </div>
            </form>
    
            <div id="container" style="
            position: fixed;
            top: 0px;
            bottom: 0px;
            right: 0px;
            width: 100%;
            border: none;
            margin: 0;
            padding: 0;
            overflow: hidden;
            z-index: 0;
            height: 100%;"></div>
        </div>
        
        

    </body>
    <script>
        
        const data = []

        async function createChart(){
            // create a tag cloud chart
            var chart = anychart.tagCloud(data);

            // set the chart title
            chart.title('Science for Entrepreneurship')
            // set array of angles, by which words will be placed
            chart.angles([0, -45, 90])

            // add an event listener
            chart.listen("pointClick", function(e){
            var url = "https://www.google.com/search?q=" + e.point.get("x");
            window.open(url, "_blank");
            });

            // display chart
            chart.container("container");
            await chart.draw();
            $('.anychart-credits').remove();
        }
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
        async function Send(){
            var input = document.getElementById("command").value;
            await firebase.firestore().collection("science").doc(input).set({
                field: NaN
            });
            sleep(500);
            location.reload();
        }
        if (data.length == 0) {
            getMarkers();
            console.log(data);
        } 
            
        async function getMarkers() {
            const events = await firebase.firestore().collection("science");
            await events.get().then((querySnapshot) => {
                querySnapshot.forEach((doc) => {
                    data.push({"x": doc.id, "value": 1})
                })
            })
            createChart();
        }

        //this is so easy to bypass I don't even want to talk about it

        async function Delete(){
            var delWord = await document.getElementById("delWord").value;
            console.log(delWord.length);
            if(document.getElementById("code").value == "1236"){
                if (delWord.length == 0){
                    await db.collection("paulick")
                    .get()
                    .then(res => {
                        res.forEach(element => {
                        element.ref.delete();
                        });
                    });
                } else{
                    await db.collection("paulick").doc(delWord).delete()
                    console.log("deleted");
                }
                location.reload();
            }
        }
        function Room(){
            
        }

        
    </script>

    
</body>

</html>
